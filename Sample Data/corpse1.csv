incorrect default cron expression for snapshots repository it is '0 0' which is not a valid value - it should probably be the same as for releases
Default configuration does not proxy the central repo - Failed pre-download policies Testing the fix for MRM-370...rm -rf $M2_REPO/org/apache/maven/plugins/maven-clean-plugincd /path/to/projectmvn cleanI get the usual ...could not be found or no valid version... message.  In the Archiva logs:jvm 1    | 2007-06-22 06:25:29,796 [SocketListener0-1] INFO  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Failed pre-download policies -C:\${appserver.home}\repositories\internal\org\apache\maven\plugins\maven-clean-plugin\maven-metadata.xmlThere are no whitelist patterns for the internal -> central proxy connector.  We should ship with configuration that actually makes it proxy.  Adding a whitelist pattern of "*" seems to work.Should an absence of whitelist patterns mean 'proxy everything'?
[MySQL] Specified key was too long; max key length is 765 bytes When starting up archiva on a MySQL Database. the following error is seen.{code}Caused by: javax.jdo.JDODataStoreException: An exception was thrown while adding/validating class(es) : Specified key was too long; max key length is 765 bytescom.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Specified key was too long; max key length is 765 bytes        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2870)        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1573)        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1665)        at com.mysql.jdbc.Connection.execSQL(Connection.java:3170)        at com.mysql.jdbc.Connection.execSQL(Connection.java:3099)        at com.mysql.jdbc.Statement.execute(Statement.java:695)        at org.jpox.store.rdbms.table.AbstractTable.executeDdlStatement(AbstractTable.java:614)        at org.jpox.store.rdbms.table.AbstractTable.executeDdlStatementList(AbstractTable.java:570)        at org.jpox.store.rdbms.table.AbstractTable.create(AbstractTable.java:297)        at org.jpox.store.rdbms.table.AbstractTable.exists(AbstractTable.java:341)        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.performTablesValidation(RDBMSManager.java:3052)        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.addClassTablesAndValidate(RDBMSManager.java:3313)        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.run(RDBMSManager.java:2554)        at org.jpox.store.rdbms.RDBMSManager$MgmtTransaction.execute(RDBMSManager.java:2406)        at org.jpox.store.rdbms.RDBMSManager.addClasses(RDBMSManager.java:821)        at org.jpox.store.rdbms.RDBMSManager.addClass(RDBMSManager.java:835)        at org.jpox.AbstractPersistenceManager.newObjectIdInstance(AbstractPersistenceManager.java:2377)        at org.apache.maven.archiva.database.jdo.JdoAccess.getObjectById(JdoAccess.java:428)        at org.apache.maven.archiva.database.jdo.JdoAccess.getObjectById(JdoAccess.java:466)        at org.apache.maven.archiva.database.jdo.JdoRepositoryDAO.getRepository(JdoRepositoryDAO.java:76)        at org.apache.maven.archiva.web.startup.ConfigurationSynchronization.synchConfiguration(ConfigurationSynchronization.java:94)        at org.apache.maven.archiva.web.startup.ConfigurationSynchronization.initialize(ConfigurationSynchronization.java:147)        at org.codehaus.plexus.personality.plexus.lifecycle.phase.InitializePhase.execute(InitializePhase.java:33){code}
Unable to create a "snapshot only" repository. 1- Create or edit any repository2- Uncheck the "Releases Included"3- submit=> The repository "Releases Included" always stays to true.
properties in pom are not resolved (at least while browsing) I extensively use properties in pom.xml (see attached one).But Archiva does not resolve pom configuration. When I browse my project I see not resolved values.Attached mentioned project's pom.xml and screenshot of browse page.
Error with artifacts that do not have a pom.xml file When trying to download an artifact with no pom (for instance xml-security / xmlsec ) maven fails with an error. When not using Archiva, maven does not fail. (it only shows a warning).here is the stack trace (with archiva). You will need to modify the pom.xml file to point to your archiva server / port for this to work.{code}+ Error stacktraces are turned on.[INFO] Scanning for projects...[INFO] ----------------------------------------------------------------------------[INFO] Building Aplicacion xxx[INFO]    task-segment: [compile][INFO] ----------------------------------------------------------------------------[INFO] [resources:resources][INFO] Using default encoding to copy filtered resources.Downloading: http://trn-esv1:8080/archiva/repository/internal/xml-security/xmlsec/1.3.0/xmlsec-1.3.0.pom[INFO] ------------------------------------------------------------------------[ERROR] BUILD ERROR[INFO] ------------------------------------------------------------------------[INFO] Error building POM (may not be this project's POM).Project ID: xml-security:xmlsecReason: Error getting POM for 'xml-security:xmlsec' from the repository: Error transferring file  xml-security:xmlsec:pom:1.3.0from the specified remote repositories:  central (http://trn-esv1:8080/archiva/repository/internal),  internal-snapshot (http://trn-esv1:8080/archiva/repository/snapshots)[INFO] ------------------------------------------------------------------------[INFO] Traceorg.apache.maven.lifecycle.LifecycleExecutionException: Unable to get dependency information: Unable to read the metadata file for artifact 'xml-security:xmlsec:jar': Error getting POM for 'xml-security:xmlsec' from the repository: Error transferring file  xml-security:xmlsec:pom:1.3.0from the specified remote repositories:  central (http://trn-esv1:8080/archiva/repository/internal),  internal-snapshot (http://trn-esv1:8080/archiva/repository/snapshots)  xml-security:xmlsec:jar:1.3.0from the specified remote repositories:  central (http://trn-esv1:8080/archiva/repository/internal),  internal-snapshot (http://trn-esv1:8080/archiva/repository/snapshots)Path to dependency:        1) com.foo.bar:bar-web:war:1.0.0-SNAPSHOT        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:551)        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:475)        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:454)        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:306)        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:273)        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:140)        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:322)        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:115)        at org.apache.maven.cli.MavenCli.main(MavenCli.java:256)        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)        at java.lang.reflect.Method.invoke(Method.java:585)        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)Caused by: org.apache.maven.artifact.resolver.ArtifactResolutionException: Unable to get dependency information: Unable to read the metadata file for artifact 'xml-security:xmlsec:jar': Error getting POM for 'xml-security:xmlsec' from the repository: Error transferring file  xml-security:xmlsec:pom:1.3.0from the specified remote repositories:  central (http://trn-esv1:8080/archiva/repository/internal),  internal-snapshot (http://trn-esv1:8080/archiva/repository/snapshots)  xml-security:xmlsec:jar:1.3.0from the specified remote repositories:  central (http://trn-esv1:8080/archiva/repository/internal),  internal-snapshot (http://trn-esv1:8080/archiva/repository/snapshots)Path to dependency:        1) com.foo.bar:bar-web:war:1.0.0-SNAPSHOT        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:297)        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.collect(DefaultArtifactCollector.java:67)        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:223)        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:211)        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolveTransitively(DefaultArtifactResolver.java:182)        at org.apache.maven.plugin.DefaultPluginManager.resolveTransitiveDependencies(DefaultPluginManager.java:1117)        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:366)        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:534)        ... 16 moreCaused by: org.apache.maven.artifact.metadata.ArtifactMetadataRetrievalException: Unable to read the metadata file for artifact 'xml-security:xmlsec:jar': Error getting POM for 'xml-security:xmlsec' from the repository: Error transferring file  xml-security:xmlsec:pom:1.3.0from the specified remote repositories:  central (http://trn-esv1:8080/archiva/repository/internal),  internal-snapshot (http://trn-esv1:8080/archiva/repository/snapshots)        at org.apache.maven.project.artifact.MavenMetadataSource.retrieve(MavenMetadataSource.java:131)        at org.apache.maven.artifact.resolver.DefaultArtifactCollector.recurse(DefaultArtifactCollector.java:275)        ... 23 moreCaused by: org.apache.maven.project.ProjectBuildingException: Error getting POMfor 'xml-security:xmlsec' from the repository: Error transferring file  xml-security:xmlsec:pom:1.3.0from the specified remote repositories:  central (http://trn-esv1:8080/archiva/repository/internal),  internal-snapshot (http://trn-esv1:8080/archiva/repository/snapshots)        at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepository(DefaultMavenProjectBuilder.java:501)        at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromRepository(DefaultMavenProjectBuilder.java:225)        at org.apache.maven.project.artifact.MavenMetadataSource.retrieve(MavenMetadataSource.java:102)        ... 24 moreCaused by: org.apache.maven.artifact.resolver.ArtifactResolutionException: Error transferring file  xml-security:xmlsec:pom:1.3.0from the specified remote repositories:  central (http://trn-esv1:8080/archiva/repository/internal),  internal-snapshot (http://trn-esv1:8080/archiva/repository/snapshots)        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:140)        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:63)        at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepository(DefaultMavenProjectBuilder.java:467)        ... 26 moreCaused by: org.apache.maven.wagon.TransferFailedException: Error transferring file        at org.apache.maven.wagon.providers.http.LightweightHttpWagon.fillInputData(LightweightHttpWagon.java:99)        at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:68)        at org.apache.maven.artifact.manager.DefaultWagonManager.getRemoteFile(DefaultWagonManager.java:369)        at org.apache.maven.artifact.manager.DefaultWagonManager.getArtifact(DefaultWagonManager.java:282)        at org.apache.maven.artifact.manager.DefaultWagonManager.getArtifact(DefaultWagonManager.java:244)        at org.apache.maven.artifact.resolver.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:124)        ... 28 moreCaused by: java.io.IOException: Server returned HTTP response code: 503 for URL: http://trn-esv1:8080/archiva/repository/internal/xml-security/xmlsec/1.3.0/xmlsec-1.3.0.pom        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1174)        at org.apache.maven.wagon.providers.http.LightweightHttpWagon.fillInputData(LightweightHttpWagon.java:85)        ... 33 more[INFO] ------------------------------------------------------------------------[INFO] Total time: 1 second[INFO] Finished at: Tue Jul 10 15:05:00 GMT-03:00 2007[INFO] Final Memory: 2M/4M[INFO] ------------------------------------------------------------------------{code}
